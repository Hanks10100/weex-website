<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Customize native APIs | Weex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="How to customize native APIs ?Weex SDK provides only rendering capability, rather than having other capabilities, such as network, picture, and URL redirection. If you want the these features, you nee">
<meta property="og:type" content="website">
<meta property="og:title" content="Customize native APIs">
<meta property="og:url" content="http://alibaba.github.io/guide/how-to/cuszomize-native-apis.html">
<meta property="og:site_name" content="Weex">
<meta property="og:description" content="How to customize native APIs ?Weex SDK provides only rendering capability, rather than having other capabilities, such as network, picture, and URL redirection. If you want the these features, you nee">
<meta property="og:updated_time" content="2016-12-20T15:20:47.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Customize native APIs">
<meta name="twitter:description" content="How to customize native APIs ?Weex SDK provides only rendering capability, rather than having other capabilities, such as network, picture, and URL redirection. If you want the these features, you nee">
  
    <link rel="alternate" href="/atom.xml" title="Weex" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/weex-website/css/style.css">
  <link rel="stylesheet" href="/weex-website/css/swiper.min.css">
</head>

<body id="guide" class="lang-en">
  
  <header id="header">
  <div class="navbar">
    <a id="logo" href="/weex-website/">
      <img src="/weex-website/images/logo.png" />
    </a>
    <div class="main-nav">
      <ul class="links">
        <li><a href="/weex-website/guide">Guide</a></li>
        <li><a href="/weex-website/references">References</a></li>
        <li><a href="/weex-website/faq.html">FAQ</a></li>
        <li class="dropdown">
            <a href="javascript:;">Resources</a>
            <ul class="dropdown-menu subnav">
              <li>
                <a href="/weex-website/tools">Service &amp; Tools</a>
              </li>
              <li>
                <a href="/weex-website/advanced">Advanced</a>
              </li>
              <li>
                <a href="/weex-website/playground.html">Playground</a>
              </li>
              <li>
                <a href="https://www.npmjs.com/package/weex-devtool" target="_blank">Devtool</a>
              </li>
              <li>
                <a href="https://www.npmjs.com/package/weexpack" target="_blank">Weexpack</a>
              </li>
              <li>
                <a href="http://dotwe.org" target="_blank">Dot we</a>
              </li>
            </ul>
        </li>
      </ul>
      <ul class="info">
        <li><a href="https://github.com/alibaba/weex/" target="_blank"><span class="btn-github iconfont icon-github"></span></a></li>
      </ul>
      <ul class="tools">
        <li>
          <div class="search">
  <form id="search-form" class="search-form"> <!-- 搜索框相关 -->
    <input type="text" id="search-input-header" name="q" results="0" placeholder="search..." class="form-control search-input" autocomplete="off" autocorrect="off"/>
    <span class="iconfont icon-search"></span>
  </form>
  <div class="results-panel">
  </div>
</div>
        </li>
        <!--<li></li>-->
      </ul>
    </div>
  </div>
  <div id="mobile-nav">
    <a id="logo" href="/">
      <img src="/weex-website/images/logo.png" />
    </a>
    <a class="btn-menu"><span class="iconfont icon-nav"></span></a>
  </div>
</header>
  <div id="sidebar" class="">
  <div class="sidebar-menu">
    
      <div class="search">
  <form id="search-form" class="search-form"> <!-- 搜索框相关 -->
    <input type="text" id="search-input-sidebar" name="q" results="0" placeholder="search..." class="form-control search-input" autocomplete="off" autocorrect="off"/>
    <span class="iconfont icon-search"></span>
  </form>
  <div class="results-panel">
  </div>
</div>
      <div class="summary">
  <h2 class="part-title">
    
      Guide
    
  </h2>
  <ul class="doc-summary">
    
    
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
   
    
      <li>
        <h3 class="chapter-title"><a href="/weex-website/guide/index.html" class="sidebar-link  ">Tutorial</a></h3>
        
      </li>
    
      <li>
        <h3 class="chapter-title"><a href="/weex-website/guide/syntax/index.html" class="sidebar-link  ">Syntax</a></h3>
        
          <ul class="chapter">
            
              <li>
                <a href="/weex-website/guide/syntax/data-binding.html" class="sidebar-link  ">Data-Binding</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/style-n-class.html" class="sidebar-link  ">Style &amp; Class</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/events.html" class="sidebar-link  ">Events</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/display-logic.html" class="sidebar-link  ">Display Logic Control</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/render-logic.html" class="sidebar-link  ">Render Logic Control</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/composed-component.html" class="sidebar-link  ">Composed Component</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/id.html" class="sidebar-link  ">Find an Element</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/comm.html" class="sidebar-link  ">Communications</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/config-n-data.html" class="sidebar-link  ">Page Config &amp; Data</a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <h3 class="chapter-title"><a href="/weex-website/guide/how-to/index.html" class="sidebar-link  ">How-tos</a></h3>
        
          <ul class="chapter">
            
              <li>
                <a href="/weex-website/guide/how-to/preview-in-browser.html" class="sidebar-link  ">Preview in browser</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/how-to/preview-in-playground-app.html" class="sidebar-link  ">Preview in native</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/how-to/customize-a-native-component.html" class="sidebar-link  ">Customize a native Component</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/how-to/cuszomize-native-apis.html" class="sidebar-link current ">Customize native APIs</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/how-to/debug-with-html5.html" class="sidebar-link  ">Debug in html5 renderer</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/how-to/require-3rd-party-libs.html" class="sidebar-link  ">Require 3rd Party Libs</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/how-to/transform-code-into-js-bundle.html" class="sidebar-link  ">Transform Code into Js Bundle</a>
              </li>
            
          </ul>
        
      </li>
    
  </ul>
</div>
    
    <a class="btn-close-sidebar iconfont  icon-close"></a>
  </div>
</div>
  <div class="article-wrapper page-layout">
  <div class="doc-nav">
    <div class="summary">
  <h2 class="part-title">
    
      Guide
    
  </h2>
  <ul class="doc-summary">
    
    
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
   
    
      <li>
        <h3 class="chapter-title"><a href="/weex-website/guide/index.html" class="sidebar-link  ">Tutorial</a></h3>
        
      </li>
    
      <li>
        <h3 class="chapter-title"><a href="/weex-website/guide/syntax/index.html" class="sidebar-link  ">Syntax</a></h3>
        
          <ul class="chapter">
            
              <li>
                <a href="/weex-website/guide/syntax/data-binding.html" class="sidebar-link  ">Data-Binding</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/style-n-class.html" class="sidebar-link  ">Style &amp; Class</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/events.html" class="sidebar-link  ">Events</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/display-logic.html" class="sidebar-link  ">Display Logic Control</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/render-logic.html" class="sidebar-link  ">Render Logic Control</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/composed-component.html" class="sidebar-link  ">Composed Component</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/id.html" class="sidebar-link  ">Find an Element</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/comm.html" class="sidebar-link  ">Communications</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/syntax/config-n-data.html" class="sidebar-link  ">Page Config &amp; Data</a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <h3 class="chapter-title"><a href="/weex-website/guide/how-to/index.html" class="sidebar-link  ">How-tos</a></h3>
        
          <ul class="chapter">
            
              <li>
                <a href="/weex-website/guide/how-to/preview-in-browser.html" class="sidebar-link  ">Preview in browser</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/how-to/preview-in-playground-app.html" class="sidebar-link  ">Preview in native</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/how-to/customize-a-native-component.html" class="sidebar-link  ">Customize a native Component</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/how-to/cuszomize-native-apis.html" class="sidebar-link current ">Customize native APIs</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/how-to/debug-with-html5.html" class="sidebar-link  ">Debug in html5 renderer</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/how-to/require-3rd-party-libs.html" class="sidebar-link  ">Require 3rd Party Libs</a>
              </li>
            
              <li>
                <a href="/weex-website/guide/how-to/transform-code-into-js-bundle.html" class="sidebar-link  ">Transform Code into Js Bundle</a>
              </li>
            
          </ul>
        
      </li>
    
  </ul>
</div>
  </div>
  

<article class="article article-type-guide">
  <div class="article-entry" itemprop="articleBody">
    <header class="article-header">
  
    
      <h1 class="article-title" itemprop="name">
        Customize native APIs
      </h1>
    
  
  <time class="article-date" datetime="2016-12-20T15:20:47.000Z">Updated time: 20/12/2016</time>
</header>
    <h1 id="How-to-customize-native-APIs"><a href="#How-to-customize-native-APIs" class="headerlink" title="How to customize native APIs ?"></a>How to customize native APIs ?</h1><p>Weex SDK provides only rendering capability, rather than having other capabilities, such as network, picture, and URL redirection. If you want the these features, you need to implement them yourselves.<br>The example below will describe how to extend weex with native logic or ‘bridge’ your existed native code.</p>
<h2 id="A-URLHelper-Example"><a href="#A-URLHelper-Example" class="headerlink" title="A URLHelper Example"></a>A URLHelper Example</h2><h3 id="Create-your-own-WXModule-in-native"><a href="#Create-your-own-WXModule-in-native" class="headerlink" title="Create your own WXModule in native:"></a>Create your own <code>WXModule</code> in native:</h3><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">URLHelperModule</span> <span class="keyword">extends</span> <span class="title">WXModule</span></span>&#123;</div><div class="line">2<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String WEEX_CATEGORY=<span class="string">"com.taobao.android.intent.category.WEEX"</span>;</div><div class="line">2<span class="meta">@WXModuleAnno</span></div><div class="line">2<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openURL</span><span class="params">(String url)</span></span>&#123;</div><div class="line">22<span class="keyword">if</span> (TextUtils.isEmpty(url)) &#123;</div><div class="line">222<span class="keyword">return</span>;</div><div class="line">22&#125;</div><div class="line">22StringBuilder builder=<span class="keyword">new</span> StringBuilder(<span class="string">"http:"</span>);</div><div class="line">22builder.append(url);</div><div class="line">22Uri uri = Uri.parse(builder.toString());</div><div class="line">        Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, uri);</div><div class="line">22intent.addCategory(WEEX_CATEGORY);</div><div class="line">        mWXSDKInstance.getContext().startActivity(intent);</div><div class="line">2&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Notice the <code>@WXModuleAnno</code>, use this annotation to mark the methods you wanna expose to javascript.<br>If your also want to callback to javascript, you should define a <code>callbackId</code> parameter to received ‘JS callback function id’:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">URLHelperModule</span> <span class="keyword">extends</span> <span class="title">WXModule</span></span>&#123;</div><div class="line">2</div><div class="line">2<span class="meta">@WXModuleAnno</span></div><div class="line">2<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openURL</span><span class="params">(String url,String callbackId)</span></span>&#123;</div><div class="line">22<span class="comment">//...</span></div><div class="line">22<span class="comment">//callback to javascript </span></div><div class="line">22Map&lt;String, Object&gt; result = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</div><div class="line">22result.put(<span class="string">"ts"</span>, System.currentTimeMillis());</div><div class="line">22WXBridgeManager.getInstance().callback(mWXSDKInstance.getInstanceId(), callbackId, result);</div><div class="line">2&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Register-your-module-to-engine"><a href="#Register-your-module-to-engine" class="headerlink" title="Register your module to engine:"></a>Register your module to engine:</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">try &#123;</div><div class="line">2 WXSDKEngine.registerModule(&quot;myURL&quot;, URLHelperModule.class);//&apos;myURL&apos; is the name you&apos;ll use in javascript</div><div class="line">2&#125; catch (WXException e) &#123;</div><div class="line">2   WXLogUtils.e(e.getMessage());</div><div class="line">2&#125;</div></pre></td></tr></table></figure>
<h3 id="Now-you-can-use-eventModule-in-javascript-like-this"><a href="#Now-you-can-use-eventModule-in-javascript-like-this" class="headerlink" title="Now, you can use eventModule in javascript like this:"></a>Now, you can use eventModule in javascript like this:</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> URLHelper = <span class="built_in">require</span>(<span class="string">'@weex-module/myURL'</span>);<span class="comment">//same as you registered</span></div><div class="line">URLHelper.openURL(<span class="string">"http://www.taobao.com"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">ts</span>)</span>&#123;</div><div class="line">2<span class="built_in">console</span>.log(<span class="string">"url is open at "</span>+ts);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Things-you-need-to-note"><a href="#Things-you-need-to-note" class="headerlink" title="Things you need to note:"></a>Things you need to note:</h2><ol>
<li>Customized components must inherit from <code>WXModule</code>;</li>
<li>@WXModuleAnno annotation must be added, as it is the only way to be recognized by Weex;</li>
<li>The access levels of method must be <strong>public</strong>;</li>
<li>The module class also can not be an inner class;</li>
<li>Customized components should not be obfuscated by tools like ProGuard;</li>
<li>Module methods will be invoked on the UI thread, so do not put time-consuming operations there;</li>
<li>Weex parameter’s type can be int, double, float, String, Map, List, self-defined class that implements WXObject interface;</li>
</ol>

  </div>
  
</article>
</div>
  <script>window.PAGE_TYPE = "guide"</script>
  <footer id="footer">
  <div class="row clearfix">
    <div class="ali-logo">
      <img src="/weex-website/images/ali-open-source.png" alt="Alibaba">
    </div>
    <div class="dropdown select-lang">
      <a href="javascript:;" class="dropdown-toggle">
        Language
        <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li>
          <a href="/weex-website/guide/how-to/cuszomize-native-apis.html">English</a>
        </li>
        <li>
          <a href="/weex-website/cn/guide/how-to/cuszomize-native-apis.html">中文</a>
        </li>
      </ul>
    </div>
  </div>
  <div class="row">
    <p><span>Released under </span><a href="">Apache License 2.0</a></p>
  </div>
  <div class="row clearfix">
    <div class="cell"><span>Copyright(c) 2016 </span><a href="https://www.alibaba.com">Alibaba</a></div>
    <div class="cell"><span>GroupMade by </span><a href="">阿里云UED AX</a></div>
  </div>
</footer>
  <div style="display: none;">
  <script src="//s95.cnzz.com/z_stat.php?id=1261102667&amp;web_id=1261102667" language="JavaScript"></script>
</div>

  <script src="/weex-website/js/reqwest.js"></script>
  <script src="/weex-website/js/velocity.js"></script>
  <script src="/weex-website/js/common.js"></script>
</body>
</html>
