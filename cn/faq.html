<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>常见问题 | Weex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="常见问题解答Windows 指令错误请先安装 Git for Windows，在 For Windows 中查看更多信息。
Android Studio 中 Gradle 错误下载 license-gradle-plugin.jar 可能引发一些错误，比如 链接被重置（Connection reset） 和 证书无效（peer not authenticated） 。这可能是由于网络问题导致的，请">
<meta property="og:type" content="website">
<meta property="og:title" content="常见问题">
<meta property="og:url" content="http://alibaba.github.io/cn/faq.html">
<meta property="og:site_name" content="Weex">
<meta property="og:description" content="常见问题解答Windows 指令错误请先安装 Git for Windows，在 For Windows 中查看更多信息。
Android Studio 中 Gradle 错误下载 license-gradle-plugin.jar 可能引发一些错误，比如 链接被重置（Connection reset） 和 证书无效（peer not authenticated） 。这可能是由于网络问题导致的，请">
<meta property="og:updated_time" content="2016-12-22T10:14:16.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="常见问题">
<meta name="twitter:description" content="常见问题解答Windows 指令错误请先安装 Git for Windows，在 For Windows 中查看更多信息。
Android Studio 中 Gradle 错误下载 license-gradle-plugin.jar 可能引发一些错误，比如 链接被重置（Connection reset） 和 证书无效（peer not authenticated） 。这可能是由于网络问题导致的，请">
  
    <link rel="alternate" href="/atom.xml" title="Weex" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/weex-website/css/style.css">
  <link rel="stylesheet" href="/weex-website/css/swiper.min.css">
  

</head>

<body id="faq" class="lang-cn">
  
  <header id="header">
  <div class="navbar">
    <a id="logo" href="/weex-website/cn/">
      <img src="/weex-website/images/logo.png" />
    </a>
    <div class="main-nav">
      <ul class="links">
        <li><a href="/weex-website/cn/guide">教程</a></li>
        <li><a href="/weex-website/cn/references">手册</a></li>
        <li><a href="/weex-website/cn/faq.html">FAQ</a></li>
        <li class="dropdown">
            <a href="javascript:;">资源</a>
            <ul class="dropdown-menu subnav">
              <li>
                <a href="/weex-website/cn/playground.html">Playground</a>
              </li>
              <li>
                <a href="/weex-website/cn/tools">工具和服务</a>
              </li>
              <li>
                <a href="/weex-website/cn/advanced">高阶知识</a>
              </li>
              <li>
                <a href="https://www.npmjs.com/package/weex-devtool" target="_blank">Devtool</a>
              </li>
            </ul>
        </li>
      </ul>
      <ul class="info">
        <li><a href="https://github.com/alibaba/weex/" target="_blank"><span class="btn-github iconfont icon-github"></span></a></li>
      </ul>
      <ul class="tools">
        <li><a class="btn-search"><span class="iconfont icon-search"></span></a></li>
        <!--<li></li>-->
      </ul>
    </div>
  </div>
  <div id="mobile-nav">
    <a id="logo" href="/">
      <img src="/weex-website/images/logo.png" />
    </a>
    <a class="btn-menu"><span class="iconfont icon-nav"></span></a>
  </div>
</header>
  <div id="sidebar" class="">
  <div class="sidebar-menu">
    
      <ul class="main-nav">
        <li>
          <a class="" href="/weex-website/cn/guide">
            教程
          </a>
        </li>
        <li>
          <a class="" href="/weex-website/cn/references">
            手册
          </a>
        </li>
        <li>
          <a href="/weex-website/cn/faq">
            FAQ
          </a>
        </li>
        <li>
            <p>资源</p>
            <ul class="subnav">
              <li>
                <a href="./playground.html">Playground</a>
              </li>
              <li>
                <a href="/weex-website/cn/tools">工具和服务</a>
              </li>
              <li>
                <a href="/weex-website/cn/advanced">高阶知识</a>
              </li>
              <li>
                <a href="https://www.npmjs.com/package/weex-devtool" target="_blank">Devtool</a>
              </li>
            </ul>
        </li>
        <li>
          <a href="https://github.com/alibaba/weex" target="_blank">
            Github
          </a>
        </li>
      </ul>
    
    <a class="btn-close-sidebar iconfont  icon-close"></a>
  </div>
</div>
  <div class="article-wrapper post-layout">
  

<article id="post-undefined" class="article article-type-faq">
  <div class="article-entry" itemprop="articleBody">
    <header class="article-header">
  
    
      <h1 class="article-title" itemprop="name">
        常见问题
      </h1>
    
  
  <time class="article-date" datetime="2016-12-22T10:14:16.000Z">Updated time: 22/12/2016</time>
</header>
    <h1 id="常见问题解答"><a href="#常见问题解答" class="headerlink" title="常见问题解答"></a>常见问题解答</h1><h2 id="Windows-指令错误"><a href="#Windows-指令错误" class="headerlink" title="Windows 指令错误"></a>Windows 指令错误</h2><p>请先安装 <a href="https://git-scm.com/download/win" target="_blank" rel="external">Git for Windows</a>，在 <a href="https://github.com/alibaba/weex/tree/dev#for-windows" target="_blank" rel="external">For Windows</a> 中查看更多信息。</p>
<h2 id="Android-Studio-中-Gradle-错误"><a href="#Android-Studio-中-Gradle-错误" class="headerlink" title="Android Studio 中 Gradle 错误"></a>Android Studio 中 Gradle 错误</h2><p>下载 <code>license-gradle-plugin.jar</code> 可能引发一些错误，比如 <code>链接被重置（Connection reset）</code> 和 <code>证书无效（peer not authenticated）</code> 。这可能是由于网络问题导致的，请尝试使用代理或VPN。</p>
<h2 id="使用本地图片"><a href="#使用本地图片" class="headerlink" title="使用本地图片"></a>使用本地图片</h2><p>Weex 的原生运行机制支持从设备中加载图片，你只需要设置文件 url，例如 <code>file:///sdcard/image_new0.png</code> 这样的格式。但是 Weex 暂时还不支持加载你工程中的图片文件。</p>
<h2 id="Windows-错误-The-header-content-contains-invalid-characters-（头中包含非法字符）"><a href="#Windows-错误-The-header-content-contains-invalid-characters-（头中包含非法字符）" class="headerlink" title="Windows 错误 The header content contains invalid characters （头中包含非法字符）"></a>Windows 错误 <code>The header content contains invalid characters</code> （头中包含非法字符）</h2><p>这是由于 weex-toolkit 的依赖 http-server 导致的，http-server 的老版本在中文 windows 中的支持不是很好。我们已经修复了这个问题，请在使用前升级 weex-toolkit 版本。</p>
<h2 id="Playground-应用在扫面后什么都没有显示（白屏）"><a href="#Playground-应用在扫面后什么都没有显示（白屏）" class="headerlink" title="Playground 应用在扫面后什么都没有显示（白屏）"></a>Playground 应用在扫面后什么都没有显示（白屏）</h2><p>最好的方法是查看 debug 日志来查找原因，你可以按照 <a href="/how-to/debug-with-devtools.md">这篇文档</a> 中的说明来查明导致这一问题的原因。</p>
<h2 id="关于-ECMAScript-版本问题"><a href="#关于-ECMAScript-版本问题" class="headerlink" title="关于 ECMAScript 版本问题"></a>关于 ECMAScript 版本问题</h2><p>Weex 在 iOS 中使用 JSCore ，在 Android 中使用 v8，因此他们都支持 ECMAScript 5。另外，我们还在原生环境中加了一些 polyfills：</p>
<ul>
<li><code>Promise</code> in iOS/Android</li>
<li><code>Timer APIs</code> (setTimeout/clearTimeout/setInterval/clearInterval`) in iOS/Android</li>
<li><code>console</code> in iOS/Android</li>
</ul>
<p>在浏览器中我们暂时是包含了一个 <code>Promise</code> 的 polyfill。</p>
<p>在未来，开发者可以选择是否通过 configurations 来导入一个 polyfill。</p>
<p>你也可以通过带有 <code>webpack</code> 的 <code>babel</code> 来写 ES6，这个加载器能够自动将 ES6 转换为 ES5。</p>
<p>如果你还想要更多的 ES6 polyfills，你可以把他们引入到 JS Bundle 中。</p>
<h2 id="前端依赖"><a href="#前端依赖" class="headerlink" title="前端依赖"></a>前端依赖</h2><p>在 Weex 中你有很多方法来 import/require 一个组件或者一个 JS 模块。以 ES5 为例：</p>
<ul>
<li><code>require(&#39;xxx.js&#39;)</code> : 依赖一个 JS 文件</li>
<li><code>require(&#39;npm-module-name&#39;)</code> : 依赖一个 NPM 模块</li>
<li><code>require(&#39;xxx.we&#39;)</code> : 包含一个 <code>.we</code> 文件来注册一个 Weex 自定义组件</li>
<li><code>require(&#39;@weex-module/xxx&#39;)</code> : 以来一个 Weex 原生模块。注意这只支持 <code>*.we</code> 文件而不支持 <code>*.js</code> 文件。如果你想要在一个 <code>*.js</code> 文件中使用 Weex 原生模块，暂时你可以这样写：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// use this piece of code below to get Weex native module "modal"</span></div><div class="line"><span class="keyword">var</span> modal</div><div class="line">__weex_define__(<span class="string">'@weex-temp/x'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">__weex_require__</span>) </span>&#123;</div><div class="line">  modal = __weex_require__(<span class="string">'@weex-module/modal'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// use APIs in "modal" module</span></div><div class="line">modal.toast(&#123;<span class="attr">message</span>: <span class="string">'hello'</span>&#125;)</div></pre></td></tr></table></figure>
<p>以后我们会给大家带来一个更好的设计。</p>
<h2 id="iOS-文本-line-height-样式不正常"><a href="#iOS-文本-line-height-样式不正常" class="headerlink" title="iOS 文本 line-height 样式不正常"></a>iOS 文本 <code>line-height</code> 样式不正常</h2><p><code>line-height</code>  样式在 <code>&lt;text&gt;</code> 组件中的表现与 H5 和 Android 不同，文本不会在行内居中，而是贴近行底部，因为这里使用的 iOS 原生 API。我们正在努力优化，与其他两端保持一致。</p>
<h2 id="Android-只支持-overflow-hidden"><a href="#Android-只支持-overflow-hidden" class="headerlink" title="Android 只支持 overflow:hidden"></a>Android 只支持 <code>overflow:hidden</code></h2><p><code>overflow</code> 样式在 Android 默认为 <code>hiddne</code> 并且无法修改，原因是 Android View framework 限制。这个问题只出现在 Android 端，iOS 端和 H5 正常。</p>
<h2 id="Android-不支持-emoji"><a href="#Android-不支持-emoji" class="headerlink" title="Android 不支持 emoji"></a>Android 不支持 emoji</h2><p>由于 Android NDK 仅支持 Modified UTF-8，因此不支持 emoji。Android 6.0 以下使用 emoji 可能会导致崩溃，在 Android 6.0 以上则可能出现意外的行为。只能使用 Modified UTF-8，<strong>不要使用 emoji</strong>。</p>
<h2 id="如何取消-750-像素自适应并以宽高比计算真实像素？"><a href="#如何取消-750-像素自适应并以宽高比计算真实像素？" class="headerlink" title="如何取消 750 像素自适应并以宽高比计算真实像素？"></a>如何取消 750 像素自适应并以宽高比计算真实像素？</h2><p><code>this.$getConfig()</code> 方法会返回一个对象，这个对象的 <code>deviceHeight</code> 和 <code>deviceWidth</code> 属性即实际设备宽度/高度（以像素为单位），而不是以 750 适配的。</p>
<p>因此，您可以使用它们来计算实际像素的宽度/高度。</p>
<p>假设您需要显示固定为 88 px 的导航栏，该导航栏的高度将是：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> height = <span class="number">88</span> * <span class="number">750</span> / env.deviceWidth</div></pre></td></tr></table></figure>
<h2 id="如何在-JavaScript-中检测是否支持某个原生的-module-component"><a href="#如何在-JavaScript-中检测是否支持某个原生的-module-component" class="headerlink" title="如何在 JavaScript 中检测是否支持某个原生的 module/component"></a>如何在 JavaScript 中检测是否支持某个原生的 module/component</h2><h3 id="检测原生-module"><a href="#检测原生-module" class="headerlink" title="检测原生 module"></a>检测原生 module</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> xxx = <span class="built_in">require</span>(<span class="string">'@weex-module/xxx'</span>)</div><div class="line"><span class="keyword">if</span> (xxx) &#123;</div><div class="line">  <span class="comment">// todo: use this module</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">  <span class="comment">// todo: handle the exception</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="检测原生-component"><a href="#检测原生-component" class="headerlink" title="检测原生 component"></a>检测原生 component</h3><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">is</span>=<span class="string">"&#123;&#123;type&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">  <span class="keyword">var</span> type = <span class="string">'xxx'</span></div><div class="line">  <span class="keyword">var</span> xxx = <span class="built_in">require</span>(<span class="string">'@weex-component/xxx'</span>)</div><div class="line">  <span class="keyword">if</span> (!xxx) &#123;</div><div class="line">    type = <span class="string">'div'</span> <span class="comment">// downgrade to &lt;div&gt;</span></div><div class="line">  &#125;</div><div class="line">  <span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">data</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">type</span>: type</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="在-pages-之间传递数据"><a href="#在-pages-之间传递数据" class="headerlink" title="在 pages 之间传递数据"></a>在 pages 之间传递数据</h2><p>如果你有两个页面，A 页面和 B 页面</p>
<ol>
<li>A -&gt; B，使用 <a href="/references/api.md#getconfig">getConfig api</a> or <a href="/modules/storage.md">storage module</a> 传递数据；</li>
<li>B -&gt; A，使用 <a href="/modules/storage.md">storage module</a> 传递数据。</li>
</ol>
<h2 id="父子组件之间进行-repeat-操作"><a href="#父子组件之间进行-repeat-操作" class="headerlink" title="父子组件之间进行 repeat 操作"></a>父子组件之间进行 repeat 操作</h2><p>如果你有需求，在父子组件之间进行 repeat 操作，需要注意，必须严格按照官网文档的语法来书写代码。如果缺少子组件定义 data 数据，或者是没有指定需要向下传递的 props，都会导致页面不正常渲染。</p>
<p>错误示例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">element</span> <span class="attr">name</span>=<span class="string">"child"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">style</span>=<span class="string">"font-size:100"</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">element</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">repeat</span>=<span class="string">"item in lists"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">  <span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">data</span>: &#123;</div><div class="line">      <span class="attr">lists</span>: [</div><div class="line">        &#123; <span class="attr">title</span>: <span class="string">'A'</span> &#125;,</div><div class="line">        &#123; <span class="attr">title</span>: <span class="string">'B'</span> &#125;,</div><div class="line">        &#123; <span class="attr">title</span>: <span class="string">'C'</span> &#125;</div><div class="line">      ]</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">ready</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">this</span>.lists.splice(<span class="number">0</span>, <span class="number">1</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>以上示例的理想执行情况，应该是页面上第一个元素 A 被删除，剩下 B、C 两个元素。<br>但是，由于错误的写法，导致列表执行 splice 操作之后，出现错误的更新情况：页面最后一个元素 C 被删除。</p>
<p>正确的写法如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">element</span> <span class="attr">name</span>=<span class="string">"child"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">style</span>=<span class="string">"font-size:100"</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line">  </div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="built_in">module</span>.exports = &#123;</div><div class="line">      <span class="attr">data</span>: &#123;</div><div class="line">        <span class="attr">title</span>: <span class="literal">null</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">element</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">repeat</span>=<span class="string">"item in lists"</span> <span class="attr">title</span>=<span class="string">"&#123;&#123; item.title &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">  <span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">data</span>: &#123;</div><div class="line">      <span class="attr">lists</span>: [</div><div class="line">        &#123; <span class="attr">title</span>: <span class="string">'A'</span> &#125;,</div><div class="line">        &#123; <span class="attr">title</span>: <span class="string">'B'</span> &#125;,</div><div class="line">        &#123; <span class="attr">title</span>: <span class="string">'C'</span> &#125;</div><div class="line">      ]</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">ready</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">this</span>.lists.splice(<span class="number">0</span>, <span class="number">1</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>在线示例请见：</p>
<ul>
<li><a href="http://dotwe.org/de97cf2c1b7ec09a53728edc9c27ad2a" target="_blank" rel="external">错误示例</a></li>
</ul>

  </div>
  
</article>
</div>
  <script>window.PAGE_TYPE = "faq"</script>
  <footer id="footer">
  <div class="row clearfix">
    <div class="ali-logo">
      <img src="/weex-website/images/ali-open-source.png" alt="Alibaba">
    </div>
    <div class="dropdown select-lang">
      <a href="javascript:;" class="dropdown-toggle">
        Language
        <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li>
          <a href="/weex-website/faq.html">English</a>
        </li>
        <li>
          <a href="/weex-website/cn/faq.html">中文</a>
        </li>
      </ul>
    </div>
  </div>
  <div class="row">
    <p><span>Released under </span><a href="">Apache License 2.0</a></p>
  </div>
  <div class="row clearfix">
    <div class="cell"><span>Copyright(c) 2016 </span><a href="https://www.alibaba.com">Alibaba</a></div>
    <div class="cell"><span>GroupMade by </span><a href="">阿里云UED AX</a></div>
    <div class="cell"><span>Proudly Produced by </span><a href="https://baichuan.taobao.com/">Alibaichuan</a> <span class="iconfont icon-baichuan"></span></div>
  </div>
</footer>
  

<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>-->


  <script src="/weex-website/js/velocity.js"></script>
  <script src="/weex-website/js/common.js"></script>
</body>
</html>
